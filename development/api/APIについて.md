# API とはなんなのか

## 概要

昨今では、テック業界で働いていない人々にとっても `API` という単語と概念が無縁のものではなくなってきたように思える。

それと相まって、ソフトウェア開発の現場ではこの `API` という単語と概念が本来と違う意味で使われていたり、正しく解釈されないで使用されているような場面が見受けられる。そのため、今一度この `API` という単語に対する理解を深めることで、これからの私のソフトウェア開発や、たまたまこのメモを見つけた人々の一助になれればと思う。

## API とは

`API` とは `"Application Programming Interface"` の略で、簡易的に表現すると異なるソフトウェア間で情報を媒介するインターフェースのようだ。

特定のサービス提供者がそのサービスの機能を使用する際や実装する際に提供するインターフェースを `API` と呼び、Web に公開して `HTTP/HTTPS通信` を使用してデータの連携を行うものを `Web API` と呼ぶ。

以上の特性から、`Web API` は `API` の部分集合であることがわかる。つまり、`Web API` は `API` の一部門であるが、`API` は `Web API` ではない。ややこしく混同しやすい単語と概念だが、整理して考えてみると合点がいく。

## Web API とは

`API` と `Web API` の区別は先の項目で既に触れたが、`Web API` を使用することによって異なる方式や言語で書かれたソフトウェア間でのデータ連携が容易に行えるようになる。

例えば、代表的な `Web API` の実装方法としては送られてきた `HTTPリクエスト` を受信してレスポンスとして `JSON` 形式のデータを返却するものがある。このレスポンスを受け取る側はどのような言語を使用していようとどのプラットフォームで処理を実行していようと、この `JSON` 形式のレスポンスを解析することで後続の処理を行うことができる。

実装言語やプラットフォームに依存しないデータ連携のインターフェースを使用できるのが `Web API` の大きな強みだが、逆を言えば `Web` へアクセスする環境がない場合はこの仕組みの恩恵を受けることはできない。もちろん、開発現場に依っては内部での閉じられたネットワーク内で内部用の `API` を用意して作業効率を向上させるといったような場合がないとは言い切れないが、これはとても特殊な例だと私は考える。

やはり `Web API` を作成する目的は言語やプラットフォームに依存しないデータ連携の仕組みを世の中に公開することであるから、 `Web API` を使用する場合は `Web` へアクセスする環境が生命線になるだろう。

`Web API` に関しては通信方法として主に以下の方式が存在する。

### 1. REST

このメモを書いている 2020/09/24 の時点で最も代表的な `Web API` の実装方式はこの `REST` である。

`REST` とは `Representational State Transfer` の略で、以下の思想に則った  `Web API`  を `RESTful API` と呼ぶ。ただ、個人的にはこれを `RESTful API` と呼んでしまうと先の例のように `API` と `Web API` を混同するおそれがあるため、`RESTful Web API` と呼んだほうが良いのではないかと考えている。

さて、`REST` には以下の根幹となる思想が存在する。

#### HTTP メソッドでデータ操作の方式を表現する

以下の `HTTPメソッド` を使用してデータ操作の方式を判別する。

- GET (データ取得)
- POST (データ送信)
- PUT (データ更新)
- DELETE (データ削除)

#### レスポンスをステートレスにする

レスポンスをステートレスにするというこの一文だけでは理解しにくいが、つまり対象の `Web API` がコールされる度に同様の処理を行い、同様の形式でレスポンスを返却することである。

仮に `https://somethingapi/io` の `APIコール` で文字列型の `"something"` を返却するように定義されていたと仮定すると、前回の `APIコール` に関係なくコールの度に `"something"` を返却する処理を実行するイメージである。つまり、どのような環境で呼び出した場合であっても、特定の `URL` でコールされた特定の `API` は常に特定の処理を実行しレスポンスを返却する。

#### URI で操作対象のリソースを判別可能にする

`REST` では `API` を介して操作する対象を `リソース` と呼ぶ。つまり、`API` を通して実行する処理をリソース単位で管理する。
また、`Web API` は `Web` で公開されるという特性から操作対象のリソースを `URI` で判別することができるという特徴を持つ。

#### JSON または XML の形式でレスポンスボディを返却する

`HTTPリクエスト` を基に処理し正常終了した場合は、`JSON` または `XML` 形式にデータを整形しレスポンスとして返却する。処理が異常終了した場合であっても、エラー内容は `JSON` または `XML` 形式で返却する。

### SOAP

`REST` 方式とはやや色が異なるが、リクエストを送信し結果をレスポンス情報として受信する流れは同じである。

`REST` 方式が `HTTP/HTTPS通信` 時に情報を付加して `HTTPリクエスト` を送信するのに対して、 `SOAP` 方式では `XML` 形式で定義されたリクエストを送信し `XML` 形式に加工されたレスポンスを受信する。
