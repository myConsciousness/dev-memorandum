# 結合について

## 概要

はっきり言って私は `SQL` があまり好きじゃない。
`SQL` が言語として非常に完成度が高く様々な分野で重宝される技術なのは、
そんなに長くない私のエンジニア人生を通して見てみても一目瞭然だ。

だけれども、読んでいても書いていても面白くない `SQL` はやはり好きになれない。
苦手意識というよりトラウマに近い何かを感じるほどだ。

そんな私が `SQL` を読みまくって書きまくる案件に参画することになった。
やはり、神に慈悲はないようである。

いつまでも嘆いてはいられないので一念発起して初心に戻って `SQL` を勉強してみた。
これはその内の `結合` に関するものだ。

## 詳細

`SQL` には基本的に次の結合方式が存在する。

1. [内部結合](#内部結合)
2. [左外部結合](#左外部結合)
3. [右外部結合](#右外部結合)

### 内部結合

`内部結合` とは、`表A` と `表B` の重なりあう部分のみを結合する方式である。

![内部結合](https://user-images.githubusercontent.com/13072231/105716270-f1e95800-5f61-11eb-8d21-356e917680f7.png)

![内部結合](https://user-images.githubusercontent.com/13072231/105716633-73d98100-5f62-11eb-8803-72f3a4ae6760.png)

**_構文:_**

`INNER JOIN` の部分が結合をしている処理、ON 以降には結合の条件を記述する。

```sql
SELECT テーブル名.カラム名, ... FROM テーブル名1
  INNER JOIN テーブル名2
  ON テーブル名1.カラム名1 = テーブル名2.カラム名2;
```

### 左外部結合

`左外部結合` とは、`表A` と `表B` の重なり合う部分と `表A` の `表B` と重なっていない全てのレコードを結合する方式である。

![左外部結合](https://user-images.githubusercontent.com/13072231/105717077-0712b680-5f63-11eb-9490-2e05613ff032.png)

![左外部結合](https://user-images.githubusercontent.com/13072231/105717151-1e51a400-5f63-11eb-9cd5-e37e393f93e1.png)

**_構文:_**

`LEFT OUTER JOIN` の部分が結合をしている処理、ON 以降には結合の条件を記述し、カラム A とカラム B が同一となる部分などの指定をする。

```sql
SELECT テーブル名.カラム名, ... FROM テーブル名1
  LEFT OUTER JOIN テーブル名2
  ON 結合の条件
```

> **_Note:_**</br>
> 左のテーブルカラムを結合の対象にし、右側のカラムに同じ値が格納されているデータを結合して表示するが、左側のテーブルのカラムはすべて表示するので、右側のテーブルで結合対象のカラムが見つからない場合には、表示結果が NULL になる。

### 右外部結合

`右外部結合` とは、`表A` と `表B` の重なり合う部分と `表B` の `表A` と重なっていない全てのレコードを結合する方式である。

![右外部結合](https://user-images.githubusercontent.com/13072231/105717442-7b4d5a00-5f63-11eb-9eb7-7ef9dafd00e6.png)

![右外部結合](https://user-images.githubusercontent.com/13072231/105717447-7c7e8700-5f63-11eb-922d-ca160bf62233.png)

**_構文:_**

`RIGHT OUTER JOIN` の部分が結合をしている処理、ON 以降には結合の条件を記述し、カラム A とカラム B が同一となる部分などの指定をする。

```sql
SELECT テーブル名.カラム名, ... FROM テーブル名1
  RIGHT OUTER JOIN テーブル名2
  ON 結合の条件
```

> **_Note:_**</br>
> 右のテーブルカラムを結合の対象にし、左側のカラムに同じ値が格納されているデータを結合して表示するが、右側のテーブルのカラムはすべて表示するので、左側のテーブルで結合対象のカラムが見つからない場合には、表示結果が NULL になる。
